!function(){const e=document.getElementById("supportTypeOneTime"),t=document.getElementById("supportTypeMonthly"),n=document.getElementById("supportCurrency"),o=document.getElementById("supportAmount"),r=document.getElementById("supportCheckoutBtn"),i=document.getElementById("supportError"),a=document.getElementById("supportMinHint");if(!(e&&t&&n&&o&&r&&i&&a))return;let d="one_time";function s(n){d=n;const o=["bg-blue-50","text-blue-700","border-blue-400","ring-2","ring-blue-400","shadow-sm","dark:bg-blue-900/30","dark:text-blue-200","dark:border-blue-500","dark:ring-blue-500"],r=["bg-white","text-gray-900","border-gray-300","dark:bg-gray-800","dark:text-gray-100","dark:border-gray-600"];"one_time"===n?(e.classList.remove(...r),e.classList.add(...o),t.classList.remove(...o),t.classList.add(...r)):(t.classList.remove(...r),t.classList.add(...o),e.classList.remove(...o),e.classList.add(...r))}function u(e){return"pln"===e?5:1}function c(){const e=n.value,t=u(e);a.textContent=`Minimum: ${t} ${e.toUpperCase()}`}function l(e){i.textContent=e,i.classList.remove("hidden")}e.addEventListener("click",function(){s("one_time")}),t.addEventListener("click",function(){s("monthly")}),n.addEventListener("change",function(){c()}),s("one_time");try{n.value="usd"}catch(e){}c(),r.addEventListener("click",async function(){i.textContent="",i.classList.add("hidden");const e=n.value,t=Number(o.value),a=u(e);if(!t||Number.isNaN(t)||t<=0)return void l("Please enter a valid amount");if(t<a)return void l(`Minimum amount is ${a} ${e.toUpperCase()}`);const s=document.querySelector('meta[name="csrf-token"]')?.content||document.querySelector("[name=csrfmiddlewaretoken]")?.value||null;if(!s)return void l("CSRF token not found. Please refresh the page.");r.disabled=!0;const c=r.textContent;r.textContent="Redirecting...";try{const n=await fetch(window.SUPPORT_CHECKOUT_URL,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":s},body:JSON.stringify({support_type:d,currency:e,amount:t})}),o=await n.json();if(!n.ok)return void l(o&&o.error?o.error:"Failed to create checkout session");if(!o.checkout_url)return void l("No checkout URL returned");window.location.href=o.checkout_url}catch(e){l("Request failed. Please try again.")}finally{r.disabled=!1,r.textContent=c}})}();