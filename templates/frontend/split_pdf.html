{% extends "frontend/edit_pdf_generic.html" %}
{% load i18n %}

{% block edit_options %}
  <div class="bg-gray-50 rounded-xl p-5 sm:p-6 border border-gray-200">
    <h3 class="text-lg font-bold mb-4 text-gray-900">{% trans "Split Settings" %}</h3>

    <div class="space-y-4">
        <!-- Split Type -->
      <div>
        <label for="split_type" class="block text-sm font-semibold text-gray-700 mb-2">
          {% trans "Split Type" %}
        </label>
        <select id="split_type" name="split_type"
                class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white text-gray-900">
          <option value="page">{% trans "By Individual Pages" %}</option>
          <option value="range">{% trans "By Page Ranges" %}</option>
          <option value="every_n">{% trans "Every N Pages" %}</option>
        </select>
      </div>

        <!-- Pages Specification -->
      <div id="pagesSpecSection">
        <label for="pages" class="block text-sm font-semibold text-gray-700 mb-2">
          <span id="pagesLabel">{% trans "Pages" %}</span>
        </label>
        <input type="text"
               id="pages"
               name="pages"
               placeholder=""
               class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white text-gray-900">
        <p class="mt-1.5 text-xs text-gray-500" id="pagesHelp">
          {% trans "Enter page numbers like '1,3,5' or leave empty for all pages" %}
        </p>
      </div>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const splitType = document.getElementById('split_type');
      const pagesInput = document.getElementById('pages');
      const pagesLabel = document.getElementById('pagesLabel');
      const pagesHelp = document.getElementById('pagesHelp');

      function updatePagesInput() {
        const type = splitType.value;
        if (type === 'page') {
          pagesLabel.textContent = "{% trans 'Pages to Extract' %}";
          pagesInput.placeholder = "1,3,5 or leave empty for all";
          pagesHelp.textContent = "{% trans 'Enter comma-separated page numbers (e.g., 1,3,5) or leave empty to split all pages' %}";
        } else if (type === 'range') {
          pagesLabel.textContent = "{% trans 'Page Ranges' %}";
          pagesInput.placeholder = "1-3,5-7";
          pagesHelp.textContent = "{% trans 'Enter page ranges like 1-3,5-7 (required)' %}";
          pagesInput.required = true;
        } else if (type === 'every_n') {
          pagesLabel.textContent = "{% trans 'Pages per File' %}";
          pagesInput.placeholder = "5";
          pagesHelp.textContent = "{% trans 'Enter number of pages per file (e.g., 5 for every 5 pages)' %}";
          pagesInput.required = true;
        }
      }

      splitType?.addEventListener('change', updatePagesInput);
      updatePagesInput();
    });
  </script>
{% endblock %}
