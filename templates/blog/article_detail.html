{% extends "base.html" %}
{% load i18n static %}

{% block title %}{{ page_title }}{% endblock %}
{% block meta_title %}{{ meta_title|default:page_title }}{% endblock %}
{% block description %}{{ meta_description|default:page_description }}{% endblock %}
{% block keywords %}{{ meta_keywords }}{% endblock %}
{% block og_title %}{{ meta_title|default:article.get_title }}{% endblock %}
{% block og_description %}{{ meta_description|default:article.get_excerpt }}{% endblock %}
{% block og_image %}{% if article.featured_image %}{{ site_base_url }}{{ article.featured_image.url }}{% else %}{{ block.super }}{% endif %}{% endblock %}

{% block structured_data %}
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BlogPosting",
      "headline": "{{ article.get_title|escapejs }}",
      "description": "{{ article.get_excerpt|escapejs }}",
      "image": "{% if article.featured_image %}{{ site_base_url }}{{ article.featured_image.url }}{% endif %}",
      "datePublished": "{{ article.published_at|date:'c' }}",
      "dateModified": "{{ article.updated_at|date:'c' }}",
      "author": {
        "@type": "Organization",
        "name": "Convertica"
      },
      "publisher": {
        "@type": "Organization",
        "name": "Convertica",
        "logo": {
          "@type": "ImageObject",
          "url": "{{ site_base_url }}{% static 'images/logo.png' %}"
        }
      },
      "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "{{ site_current_url }}"
      },
      "inLanguage": "{{ language_code }}"
    }
  </script>
{% endblock %}

{% block extra_head %}
  <style>
    /* Modern article styles */
    .article-content {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
    }

    .article-content h2 {
      position: relative;
      padding-left: 1.5rem;
      margin-top: 3rem;
      margin-bottom: 1.5rem;
    }

    .article-content h2::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0.5rem;
      bottom: 0.5rem;
      width: 4px;
      background: linear-gradient(to bottom, #3b82f6, #8b5cf6);
      border-radius: 2px;
    }

    .article-content h3 {
      margin-top: 2.5rem;
      margin-bottom: 1rem;
      position: relative;
    }

    .article-content p {
      text-align: justify;
      hyphens: auto;
    }

    .article-content ul li::marker,
    .article-content ol li::marker {
      color: #3b82f6;
      font-weight: bold;
    }

    .article-content blockquote {
      position: relative;
      background: linear-gradient(to right, #eff6ff, #f0f9ff);
      border-left: 4px solid #3b82f6;
      padding: 1.5rem;
      margin: 2rem 0;
      border-radius: 0.5rem;
    }

    .article-content blockquote::before {
      content: '"';
      position: absolute;
      top: -0.5rem;
      left: 1rem;
      font-size: 4rem;
      color: #3b82f6;
      opacity: 0.2;
      font-family: Georgia, serif;
    }

    .article-content code {
      background: linear-gradient(to right, #eff6ff, #f0f9ff);
      border: 1px solid #bfdbfe;
    }

    .article-content a {
      position: relative;
      background: linear-gradient(to right, #3b82f6, #3b82f6) no-repeat;
      background-size: 0% 2px;
      background-position: 0% 100%;
      transition: background-size 0.3s ease;
    }

    .article-content a:hover {
      background-size: 100% 2px;
    }

    .gradient-text {
      background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .article-card {
      background: linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(255,255,255,0.98) 100%);
      backdrop-filter: blur(10px);
      box-shadow: 0 20px 60px -12px rgba(0, 0, 0, 0.1), 0 0 0 1px rgba(0, 0, 0, 0.05);
    }

    .category-badge {
      background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
      box-shadow: 0 4px 14px 0 rgba(59, 130, 246, 0.4);
    }

    .sidebar-card {
      background: linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(255,255,255,0.98) 100%);
      backdrop-filter: blur(10px);
      box-shadow: 0 10px 40px -10px rgba(0, 0, 0, 0.1);
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .animate-fade-in-up {
      animation: fadeInUp 0.6s ease-out;
    }
  </style>
{% endblock %}

{% block content %}
  <main class="bg-gradient-to-br from-gray-50 via-blue-50/30 to-purple-50/30 min-h-screen text-gray-900">

    <!-- Article Header with Modern Design -->
    <section class="relative py-16 sm:py-20 md:py-24 overflow-hidden">
        <!-- Animated Background -->
      <div class="absolute inset-0 opacity-30">
        <div class="absolute inset-0" style="background-image: radial-gradient(circle at 2px 2px, #3b82f6 1px, transparent 0); background-size: 50px 50px; animation: backgroundMove 20s linear infinite;"></div>
      </div>
      <style>
        @keyframes backgroundMove {
          0% { transform: translate(0, 0); }
          100% { transform: translate(50px, 50px); }
        }
      </style>

      <div class="container mx-auto px-4 sm:px-6 lg:px-8 max-w-7xl relative z-10">
        <div class="max-w-5xl mx-auto text-center animate-fade-in-up">
          {% if article.category %}
            <span class="inline-block px-5 py-2.5 category-badge text-white rounded-full text-sm font-bold mb-6 shadow-lg">
              {{ article.category.get_name|default:article.category.name_en }}
            </span>
          {% endif %}
          <h1 class="text-4xl sm:text-5xl md:text-6xl lg:text-7xl font-black mb-8 leading-tight">
            <span class="gradient-text">{{ article.get_title }}</span>
          </h1>
          <div class="flex items-center justify-center gap-3 text-gray-500 text-sm sm:text-base">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
            </svg>
            <span class="font-medium">{{ article.published_at|date:"F d, Y" }}</span>
          </div>
        </div>
      </div>

        <!-- Decorative Wave -->
      <div class="absolute bottom-0 left-0 right-0 h-16 bg-gradient-to-t from-gray-50 via-blue-50/30 to-transparent"></div>
    </section>

    <!-- Article Content with Sidebar -->
    <section class="py-12 sm:py-16 md:py-20">
      <div class="container mx-auto px-4 sm:px-6 lg:px-8 max-w-7xl">
        <div class="flex flex-col lg:flex-row gap-8 lg:gap-10 items-start">

                <!-- Left Sidebar: Categories (Fixed Width) -->
          <aside class="w-full lg:w-64 flex-shrink-0 order-2 lg:order-1">
            <div class="sidebar-card rounded-2xl p-5 border border-gray-100/50 sticky top-6">
              <h3 class="text-base font-bold text-gray-900 mb-4 flex items-center gap-2">
                <svg class="w-4 h-4 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"></path>
                </svg>
                <span class="text-sm">{% trans "Categories" %}</span>
              </h3>
              <ul class="space-y-1.5">
                <li>
                  <a href="{% url 'blog:article_list' %}"
                     class="flex items-center gap-2 px-3 py-2 rounded-lg text-sm text-gray-700 hover:bg-gradient-to-r hover:from-blue-50 hover:to-purple-50 transition-all duration-200 font-medium {% if not article.category %}bg-gradient-to-r from-blue-50 to-purple-50 text-blue-700{% endif %}">
                    <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path>
                    </svg>
                    <span>{% trans "All" %}</span>
                  </a>
                </li>
                {% for cat in categories %}
                  <li>
                    <a href="{% url 'blog:article_list' %}?category={{ cat.slug }}"
                       class="flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-all duration-200 font-medium {% if article.category == cat %}bg-gradient-to-r from-blue-50 to-purple-50 text-blue-700{% else %}text-gray-700 hover:bg-gradient-to-r hover:from-blue-50 hover:to-purple-50{% endif %}">
                      <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"></path>
                      </svg>
                      <span class="truncate">{{ cat.get_name|default:cat.name_en }}</span>
                    </a>
                  </li>
                {% endfor %}
              </ul>
            </div>
          </aside>

                <!-- Main Article Content (Flexible Width) -->
          <article class="flex-1 min-w-0 order-1 lg:order-2">
            {% if article.featured_image %}
              <div class="mb-10 -mx-4 sm:mx-0 rounded-2xl overflow-hidden shadow-2xl animate-fade-in-up">
                <img src="{{ article.featured_image.url }}"
                     alt="{{ article.get_title }}"
                     class="w-full h-auto object-cover"
                     loading="eager"
                     decoding="async">
              </div>
            {% endif %}

            <div class="article-card rounded-3xl p-3 sm:p-4 md:p-6 lg:p-8 animate-fade-in-up">
              <div class="article-content prose prose-lg max-w-none
                          prose-headings:font-extrabold prose-headings:text-gray-900 prose-headings:leading-tight
                          prose-h1:text-4xl prose-h1:mb-4 prose-h1:mt-0
                          prose-h2:text-3xl prose-h2:mb-6 prose-h2:mt-12
                          prose-h3:text-2xl prose-h3:mb-4 prose-h3:mt-8
                          prose-p:text-gray-700 prose-p:leading-relaxed prose-p:mb-4 prose-p:mt-0 prose-p:text-base
                          prose-a:text-blue-600 prose-a:font-semibold prose-a:no-underline
                          prose-strong:text-gray-900 prose-strong:font-bold
                          prose-ul:list-disc prose-ul:pl-6 prose-ul:mb-6 prose-ul:space-y-2
                          prose-ol:list-decimal prose-ol:pl-6 prose-ol:mb-6 prose-ol:space-y-2
                          prose-li:text-gray-700 prose-li:mb-2
                          prose-blockquote:border-0 prose-blockquote:pl-0 prose-blockquote:pr-0 prose-blockquote:my-6
                          prose-code:text-blue-600 prose-code:font-mono prose-code:text-sm
                          prose-pre:bg-gray-900 prose-pre:text-gray-100 prose-pre:rounded-xl prose-pre:p-6 prose-pre:shadow-xl
                          prose-img:rounded-xl prose-img:shadow-2xl prose-img:my-10 prose-img:border-4 prose-img:border-gray-100">
                {{ article.get_content|safe }}
              </div>

              <!-- Relevant Tool Section -->
              {% if article.get_relevant_tool_url %}
                <div class="my-12 text-center">
                  <a href="{{ article.get_relevant_tool_url }}" class="inline-flex items-center px-8 py-4 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 transition-colors text-lg">
                    <svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                    </svg>
                    {{ article.get_relevant_tool_name }}
                  </a>
                </div>
              {% endif %}
            </div>

                    <!-- Related Articles with Modern Design -->
            {% if related_articles %}
              <div class="mt-20 pt-12 border-t-2 border-gradient-to-r from-blue-200 to-purple-200">
                <h2 class="text-3xl sm:text-4xl font-black text-gray-900 mb-10 text-center">
                  <span class="gradient-text">{% trans "Related Articles" %}</span>
                </h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                  {% for related in related_articles %}
                    <a href="{{ related.get_absolute_url }}"
                       class="group sidebar-card rounded-2xl overflow-hidden border border-gray-100/50 hover:shadow-2xl hover:border-blue-300 transition-all duration-300 transform hover:-translate-y-2">
                      {% if related.featured_image %}
                        <div class="w-full h-48 overflow-hidden">
                          <img src="{{ related.featured_image.url }}"
                               alt="{{ related.get_title }}"
                               class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"
                               loading="lazy"
                               decoding="async">
                        </div>
                      {% else %}
                        <div class="w-full h-48 bg-gradient-to-br from-blue-100 via-purple-100 to-pink-100 flex items-center justify-center">
                          <svg class="w-16 h-16 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                          </svg>
                        </div>
                      {% endif %}
                      <div class="p-5">
                        <h3 class="text-lg font-bold text-gray-900 group-hover:text-blue-600 transition-colors line-clamp-2 mb-3 leading-tight">
                          {{ related.get_title }}
                        </h3>
                        <div class="flex items-center gap-2 text-xs text-gray-500">
                          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                          </svg>
                          <span>{{ related.published_at|date:"M d, Y" }}</span>
                        </div>
                      </div>
                    </a>
                  {% endfor %}
                </div>
              </div>
            {% endif %}

                    <!-- Back to Blog with Modern Button -->
            <div class="mt-16 text-center">
              <a href="{% url 'blog:article_list' %}"
                 class="inline-flex items-center gap-3 px-8 py-4 bg-gradient-to-r from-blue-600 via-purple-600 to-blue-600 text-white rounded-xl hover:from-blue-700 hover:via-purple-700 hover:to-blue-700 font-bold text-lg transition-all duration-300 shadow-xl hover:shadow-2xl transform hover:scale-105">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                </svg>
                {% trans "Back to Blog" %}
              </a>
            </div>
          </article>

                <!-- Right Sidebar: Popular Tools (Fixed Width) -->
          <aside class="w-full lg:w-80 flex-shrink-0 order-3">
            <div class="sidebar-card rounded-2xl p-5 border border-gray-100/50 sticky top-6">
              <h3 class="text-lg font-bold text-gray-900 mb-4 flex items-center gap-2">
                <svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                </svg>
                {% trans "Popular Tools" %}
              </h3>
              <div class="space-y-2">
                <a href="{% url 'frontend:pdf_to_word_page' %}"
                   class="flex flex-col items-center gap-1.5 p-3 rounded-xl hover:bg-gradient-to-br hover:from-blue-50 hover:to-blue-100 transition-all duration-200 group border border-transparent hover:border-blue-200 hover:shadow-md">
                  <div class="w-12 h-12 bg-gradient-to-br from-blue-100 to-blue-200 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform">
                    <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"></path>
                    </svg>
                  </div>
                  <span class="text-xs font-bold text-gray-700 group-hover:text-blue-600 transition-colors text-center leading-tight">{% trans "PDF to Word" %}</span>
                </a>
                <a href="{% url 'frontend:merge_pdf_page' %}"
                   class="flex flex-col items-center gap-1.5 p-3 rounded-xl hover:bg-gradient-to-br hover:from-green-50 hover:to-green-100 transition-all duration-200 group border border-transparent hover:border-green-200 hover:shadow-md">
                  <div class="w-12 h-12 bg-gradient-to-br from-green-100 to-green-200 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform">
                    <svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"></path>
                    </svg>
                  </div>
                  <span class="text-xs font-bold text-gray-700 group-hover:text-green-600 transition-colors text-center leading-tight">{% trans "Merge PDF" %}</span>
                </a>
                <a href="{% url 'frontend:compress_pdf_page' %}"
                   class="flex flex-col items-center gap-1.5 p-3 rounded-xl hover:bg-gradient-to-br hover:from-purple-50 hover:to-purple-100 transition-all duration-200 group border border-transparent hover:border-purple-200 hover:shadow-md">
                  <div class="w-12 h-12 bg-gradient-to-br from-purple-100 to-purple-200 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform">
                    <svg class="w-6 h-6 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"></path>
                    </svg>
                  </div>
                  <span class="text-xs font-bold text-gray-700 group-hover:text-purple-600 transition-colors text-center leading-tight">{% trans "Compress PDF" %}</span>
                </a>
                <a href="{% url 'frontend:rotate_pdf_page' %}"
                   class="flex flex-col items-center gap-1.5 p-3 rounded-xl hover:bg-gradient-to-br hover:from-pink-50 hover:to-pink-100 transition-all duration-200 group border border-transparent hover:border-pink-200 hover:shadow-md">
                  <div class="w-12 h-12 bg-gradient-to-br from-pink-100 to-pink-200 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform">
                    <svg class="w-6 h-6 text-pink-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                    </svg>
                  </div>
                  <span class="text-xs font-bold text-gray-700 group-hover:text-pink-600 transition-colors text-center leading-tight">{% trans "Rotate PDF" %}</span>
                </a>
              </div>
              <div class="mt-5 pt-5 border-t border-gray-200">
                <a href="{% url 'frontend:all_tools_page' %}"
                   class="block w-full text-center px-4 py-3 bg-gradient-to-r from-blue-600 via-purple-600 to-blue-600 text-white rounded-xl hover:from-blue-700 hover:via-purple-700 hover:to-blue-700 text-sm font-bold transition-all shadow-lg hover:shadow-xl transform hover:scale-105">
                  {% trans "View All Tools" %}
                </a>
              </div>
            </div>
          </aside>

        </div>
      </div>
    </section>

  </main>
{% endblock %}
